<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#1a1a1a">
    <title>‚öΩ FootScore Pro - ŸÜÿ™ÿßÿ¶ÿ¨ ÿßŸÑŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±ÿ©</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <style>
        /* ========== CSS Variables ========== */
        :root {
            --primary: #00c853;
            --primary-dark: #009624;
            --primary-light: #5efc82;
            --secondary: #00b0ff;
            --danger: #ff5252;
            --warning: #ffc107;
            --dark: #0f172a;
            --darker: #020617;
            --light: #f8fafc;
            --gray: #94a3b8;
            --border: #1e293b;
            --card-bg: #1a1d2e;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --skeleton: linear-gradient(90deg, var(--border) 25%, #2a3347 50%, var(--border) 75%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: var(--dark);
            color: var(--light);
            line-height: 1.6;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        /* ========== Header & Navigation ========== */
        .header {
            background: var(--darker);
            padding: 12px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.5);
            border-bottom: 2px solid var(--primary);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 15px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .live-indicator {
            background: var(--danger);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 6px;
            animation: blink 1.5s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        /* ========== Connection Status ========== */
        .connection-status {
            position: fixed;
            top: 10px;
            left: 10px;
            z-index: 2000;
            background: var(--darker);
            border: 2px solid var(--danger);
            border-radius: 20px;
            padding: 8px 15px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85rem;
            color: var(--light);
            box-shadow: var(--shadow);
            transform: translateX(-120%);
            transition: transform 0.3s ease;
        }

        .connection-status.show {
            transform: translateX(0);
        }

        .connection-status.online {
            border-color: var(--primary);
            background: var(--primary-dark);
        }

        /* ========== Stats Bar ========== */
        .stats-bar {
            background: linear-gradient(90deg, var(--darker), var(--card-bg));
            padding: 10px 15px;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            border-bottom: 1px solid var(--border);
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.3rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 2px;
        }

        .stat-label {
            font-size: 0.75rem;
            color: var(--gray);
        }

        /* ========== Time Filter ========== */
        .time-filter {
            position: sticky;
            top: 84px;
            z-index: 900;
            background: var(--darker);
            padding: 10px 15px;
            border-bottom: 1px solid var(--border);
        }

        .time-buttons {
            display: flex;
            overflow-x: auto;
            gap: 8px;
            padding-bottom: 5px;
        }

        .time-btn {
            flex: 0 0 auto;
            padding: 8px 16px;
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 20px;
            color: var(--gray);
            font-family: 'Cairo', sans-serif;
            font-size: 0.85rem;
            cursor: pointer;
            transition: var(--transition);
            white-space: nowrap;
        }

        .time-btn.active {
            background: var(--primary);
            color: var(--darker);
            border-color: var(--primary);
        }

        /* ========== Skeleton Loading ========== */
        .skeleton-container {
            padding: 15px;
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }

        @media (min-width: 768px) {
            .skeleton-container {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 1200px) {
            .skeleton-container {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .skeleton-card {
            background: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            border: 1px solid var(--border);
            animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer {
            0% { background-position: -200px 0; }
            100% { background-position: 200px 0; }
        }

        .skeleton-header {
            padding: 15px;
            background: var(--border);
            display: flex;
            justify-content: space-between;
        }

        .skeleton-circle {
            width: 30px;
            height: 30px;
            background: var(--skeleton);
            background-size: 200px 100%;
            border-radius: 50%;
        }

        .skeleton-text {
            height: 20px;
            background: var(--skeleton);
            background-size: 200px 100%;
            border-radius: 10px;
            margin-bottom: 8px;
        }

        .skeleton-text.small {
            width: 60px;
        }

        .skeleton-text.medium {
            width: 100px;
        }

        .skeleton-text.large {
            width: 150px;
        }

        .skeleton-body {
            padding: 20px 15px;
        }

        .skeleton-team {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .skeleton-logo {
            width: 60px;
            height: 60px;
            background: var(--skeleton);
            background-size: 200px 100%;
            border-radius: 50%;
        }

        /* ========== Matches Grid ========== */
        .matches-grid {
            padding: 15px;
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            max-width: 1400px;
            margin: 0 auto;
        }

        @media (min-width: 768px) {
            .matches-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 1200px) {
            .matches-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .match-card {
            background: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            transition: var(--transition);
            position: relative;
            border: 1px solid var(--border);
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .match-card.live {
            border-color: var(--danger);
        }

        .match-card.upcoming {
            border-color: var(--secondary);
        }

        .match-card.finished {
            border-color: var(--gray);
        }

        .match-card.important {
            border-color: var(--warning);
            box-shadow: 0 0 20px rgba(255, 193, 7, 0.2);
        }

        .match-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
        }

        .match-header {
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .league-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .league-logo {
            width: 30px;
            height: 30px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 700;
        }

        .match-status {
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 700;
        }

        .status-live {
            background: var(--danger);
            color: white;
            animation: pulse 2s infinite;
        }

        .status-upcoming {
            background: var(--secondary);
            color: var(--darker);
        }

        .status-finished {
            background: var(--gray);
            color: var(--darker);
        }

        /* ========== Teams Section ========== */
        .teams-section {
            padding: 20px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            text-align: center;
        }

        .team {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .team-logo {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary-light), var(--secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            font-weight: 900;
            color: var(--darker);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .team-name {
            font-weight: 700;
            font-size: 1.1rem;
            max-width: 120px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .vs-section {
            padding: 0 20px;
            text-align: center;
            min-width: 120px;
        }

        .score {
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .vs {
            font-size: 0.9rem;
            color: var(--gray);
            font-weight: 600;
        }

        /* ========== Match Details ========== */
        .match-details {
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-top: 1px solid var(--border);
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85rem;
            color: var(--gray);
        }

        .detail-item i {
            color: var(--primary);
            width: 16px;
        }

        /* ========== FAB Buttons ========== */
        .fab-container {
            position: fixed;
            bottom: 20px;
            left: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
        }

        .fab {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            color: var(--darker);
            font-size: 1.2rem;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(0, 200, 83, 0.4);
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .fab:hover {
            transform: scale(1.1) rotate(10deg);
            box-shadow: 0 8px 25px rgba(0, 200, 83, 0.6);
        }

        /* ========== Error States ========== */
        .error-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--gray);
            display: none;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--gray);
            display: none;
        }

        /* ========== Notifications ========== */
        .notification {
            position: fixed;
            top: 20px;
            left: 20px;
            right: 20px;
            background: var(--primary);
            color: var(--darker);
            padding: 15px;
            border-radius: 10px;
            box-shadow: var(--shadow);
            z-index: 3000;
            animation: slideDown 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        @keyframes slideDown {
            from { transform: translateY(-100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* ========== League Filter ========== */
        .league-filter {
            padding: 15px;
            background: var(--darker);
            border-bottom: 1px solid var(--border);
        }

        .league-buttons {
            display: flex;
            overflow-x: auto;
            gap: 10px;
            padding-bottom: 5px;
        }

        .league-btn {
            flex: 0 0 auto;
            padding: 8px 16px;
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 20px;
            color: var(--gray);
            font-family: 'Cairo', sans-serif;
            font-size: 0.85rem;
            cursor: pointer;
            transition: var(--transition);
            white-space: nowrap;
        }

        .league-btn.active {
            background: var(--primary);
            color: var(--darker);
            border-color: var(--primary);
        }

        /* ========== Responsive ========== */
        @media (max-width: 480px) {
            .header-content {
                flex-direction: column;
                gap: 10px;
            }
            
            .stats-bar {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .team-logo {
                width: 50px;
                height: 50px;
                font-size: 1.5rem;
            }
            
            .score {
                font-size: 2rem;
            }
            
            .matches-grid {
                padding: 10px;
            }
            
            .match-details {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Connection Status -->
    <div id="connectionStatus" class="connection-status">
        <i class="fas fa-wifi"></i>
        <span>ÿ¨ÿßÿ±Ÿä ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿÆÿ≤ŸÜÿ©</span>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-futbol"></i>
                </div>
                <div>
                    <h1 style="font-size: 1.5rem; margin-bottom: 2px;">FootScore Pro</h1>
                    <div style="font-size: 0.8rem; color: var(--gray);">ŸÜÿ™ÿßÿ¶ÿ¨ ÿßŸÑŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±ÿ©</div>
                </div>
            </div>
            <div class="live-indicator">
                <i class="fas fa-circle" style="font-size: 0.6rem;"></i>
                <span id="liveMatchesCount">0</span> ŸÖÿ®ÿßÿ¥ÿ±
            </div>
        </div>
    </header>

    <!-- Stats Bar -->
    <div class="stats-bar">
        <div class="stat-item">
            <div class="stat-value" id="totalMatches">0</div>
            <div class="stat-label">ŸÖÿ®ÿßÿ±ÿßÿ©</div>
        </div>
        <div class="stat-item">
            <div class="stat-value" id="liveMatches">0</div>
            <div class="stat-label">ŸÖÿ®ÿßÿ¥ÿ±</div>
        </div>
        <div class="stat-item">
            <div class="stat-value" id="leaguesCount">0</div>
            <div class="stat-label">ÿØŸàÿ±Ÿä</div>
        </div>
        <div class="stat-item">
            <div class="stat-value" id="updateTime">ÿßŸÑÿ¢ŸÜ</div>
            <div class="stat-label">ÿ¢ÿÆÿ± ÿ™ÿ≠ÿØŸäÿ´</div>
        </div>
    </div>

    <!-- Time Filter -->
    <div class="time-filter">
        <div class="time-buttons" id="timeFilter">
            <!-- ÿ≥Ÿäÿ™ŸÖ ÿ™ÿπÿ®ÿ¶ÿ™Ÿáÿß ÿØŸäŸÜÿßŸÖŸäŸÉŸäŸãÿß -->
        </div>
    </div>

    <!-- League Filter -->
    <div class="league-filter">
        <div class="league-buttons" id="leagueFilter">
            <!-- ÿ≥Ÿäÿ™ŸÖ ÿ™ÿπÿ®ÿ¶ÿ™Ÿáÿß ÿØŸäŸÜÿßŸÖŸäŸÉŸäŸãÿß -->
        </div>
    </div>

    <!-- Skeleton Loading -->
    <div class="skeleton-container" id="skeletonLoading">
        <!-- ÿßŸÑŸáŸäŸÉŸÑ ÿßŸÑÿπÿ∏ŸÖŸä -->
    </div>

    <!-- Matches Grid -->
    <div class="matches-grid" id="matchesContainer" style="display: none;">
        <!-- ÿ≥Ÿäÿ™ŸÖ ÿ™ÿπÿ®ÿ¶ÿ™Ÿáÿß ÿØŸäŸÜÿßŸÖŸäŸÉŸäŸãÿß -->
    </div>

    <!-- Empty State -->
    <div class="empty-state" id="emptyState">
        <i class="fas fa-futbol" style="font-size: 3rem; margin-bottom: 15px; color: var(--gray);"></i>
        <h3 style="margin-bottom: 10px;">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ŸÅŸä Ÿáÿ∞ÿß ÿßŸÑŸàŸÇÿ™</h3>
        <p style="color: var(--gray); margin-bottom: 20px;">ÿ™ÿ∏Ÿáÿ± ÿßŸÑŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ÿßŸÑÿ¨ÿØŸäÿØÿ© ÿ™ŸÑŸÇÿßÿ¶ŸäŸãÿß</p>
        <button class="fab" onclick="window.FootballApp.refreshMatches()" style="margin: 0 auto; width: 50px; height: 50px;">
            <i class="fas fa-sync-alt"></i>
        </button>
    </div>

    <!-- Error State -->
    <div class="error-state" id="errorState">
        <i class="fas fa-exclamation-triangle" style="font-size: 3rem; margin-bottom: 15px; color: var(--danger);"></i>
        <h3 style="margin-bottom: 10px;">ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ</h3>
        <p style="color: var(--gray); margin-bottom: 20px;">ÿ¨ÿßÿ±Ÿä ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿÆÿ≤ŸÜÿ©</p>
        <button class="fab" onclick="window.FootballApp.refreshMatches()" style="margin: 0 auto; width: 50px; height: 50px;">
            <i class="fas fa-redo"></i>
        </button>
    </div>

    <!-- FAB Buttons -->
    <div class="fab-container">
        <button class="fab" onclick="window.FootballApp.refreshMatches()" title="ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖÿ®ÿßÿ±Ÿäÿßÿ™">
            <i class="fas fa-sync-alt"></i>
        </button>
        <button class="fab" onclick="window.FootballApp.showLiveMatches()" title="ÿßŸÑŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±ÿ©">
            <i class="fas fa-tv"></i>
        </button>
        <button class="fab" onclick="window.FootballApp.scrollToTop()" title="ÿßŸÑÿßŸÜÿ™ŸÇÿßŸÑ ŸÑŸÑÿ£ÿπŸÑŸâ">
            <i class="fas fa-arrow-up"></i>
        </button>
    </div>

    <script>
        class FootballApp {
            constructor() {
                this.config = {
                    // üîó ÿ±ÿßÿ®ÿ∑ ÿßŸÑŸÄ Proxy ÿßŸÑÿÆÿßÿµ ÿ®ŸÉ ÿπŸÑŸâ Render
                    PROXY_URL: 'https://football-matches-ai-1.onrender.com/fixtures',
                    
                    // üïí ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸÜÿ∏ÿßŸÖ
                    API_TIMEOUT: 10000,
                    UPDATE_INTERVAL: 60000, // ÿØŸÇŸäŸÇÿ© Ÿàÿßÿ≠ÿØÿ©
                    CACHE_DURATION: 30 * 60 * 1000, // 30 ÿØŸÇŸäŸÇÿ©
                    
                    VERSION: '8.0.0'
                };

                this.state = {
                    matches: [],
                    filteredMatches: [],
                    leagues: new Set(),
                    timeFilter: 'all',
                    leagueFilter: 'all',
                    isLoading: false,
                    lastUpdate: null,
                    dataSource: 'none',
                    isOnline: navigator.onLine
                };

                this.initialize();
            }

            async initialize() {
                console.log('üöÄ ÿ®ÿØÿ° FootScore Pro...');
                console.log('üîó ÿßŸÑŸÄ Proxy:', this.config.PROXY_URL);
                
                // ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸáŸäŸÉŸÑ ÿßŸÑÿπÿ∏ŸÖŸä
                this.createSkeleton();
                
                // ÿ™ÿπŸäŸäŸÜ ÿßŸÑŸÖÿ≥ÿ™ŸÖÿπŸäŸÜ ŸÑŸÑÿ£ÿ≠ÿØÿßÿ´
                this.setupEventListeners();
                
                // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÅŸÑÿßÿ™ÿ±
                this.updateTimeFilter();
                
                // ŸÖÿ≠ÿßŸàŸÑÿ© ÿ¨ŸÑÿ® ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
                await this.loadData();
            }

            createSkeleton() {
                const skeletonContainer = document.getElementById('skeletonLoading');
                const skeletonHTML = Array(6).fill(0).map((_, i) => `
                    <div class="skeleton-card" style="animation-delay: ${i * 0.1}s;">
                        <div class="skeleton-header">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div class="skeleton-circle"></div>
                                <div style="flex: 1;">
                                    <div class="skeleton-text medium"></div>
                                    <div class="skeleton-text small"></div>
                                </div>
                            </div>
                            <div class="skeleton-text small"></div>
                        </div>
                        <div class="skeleton-body">
                            <div class="skeleton-team">
                                <div class="skeleton-logo"></div>
                                <div style="flex: 1;">
                                    <div class="skeleton-text large"></div>
                                </div>
                            </div>
                            <div style="text-align: center; margin: 20px 0;">
                                <div class="skeleton-text medium" style="margin: 0 auto 10px;"></div>
                                <div class="skeleton-text small" style="margin: 0 auto;"></div>
                            </div>
                            <div class="skeleton-team">
                                <div style="flex: 1;">
                                    <div class="skeleton-text large"></div>
                                </div>
                                <div class="skeleton-logo"></div>
                            </div>
                        </div>
                    </div>
                `).join('');
                
                skeletonContainer.innerHTML = skeletonHTML;
            }

            async loadData() {
                this.state.isLoading = true;
                
                // ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© 1: ÿßŸÑÿ™ÿÆÿ≤ŸäŸÜ ÿßŸÑŸÖÿ≠ŸÑŸä
                const cachedData = this.loadCachedData();
                if (cachedData && cachedData.length > 0) {
                    this.state.matches = cachedData;
                    this.state.dataSource = 'cache';
                    this.processMatches();
                    this.showNotification('ÿ®ŸäÿßŸÜÿßÿ™ ŸÖÿÆÿ≤ŸÜÿ©', 'ÿ¢ÿÆÿ± ÿ™ÿ≠ÿØŸäÿ´: ' + this.formatRelativeTime(this.state.lastUpdate), 'info');
                }
                
                // ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© 2: ÿ¨ŸÑÿ® ÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ Proxy (ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßÿ™ÿµÿßŸÑ ÿ•ŸÜÿ™ÿ±ŸÜÿ™)
                if (this.state.isOnline) {
                    try {
                        await this.fetchFromProxy();
                    } catch (error) {
                        console.warn('‚ö†Ô∏è ŸÅÿ¥ŸÑ ÿ¨ŸÑÿ® ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ Proxy:', error);
                        // ÿ•ÿ∞ÿß ŸÑŸÖ ÿ™ŸÉŸÜ ŸáŸÜÿßŸÉ ÿ®ŸäÿßŸÜÿßÿ™ ŸÖÿÆÿ≤ŸÜÿ©ÿå ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ∑Ÿàÿßÿ±ÿ¶
                        if (this.state.matches.length === 0) {
                            this.loadEmergencyData();
                        }
                    }
                } else {
                    // ÿ•ÿ∞ÿß ŸÑŸÖ ŸäŸÉŸÜ ŸáŸÜÿßŸÉ ÿßÿ™ÿµÿßŸÑ ŸàŸÑŸäÿ≥ ŸÑÿØŸäŸÜÿß ÿ®ŸäÿßŸÜÿßÿ™ ŸÖÿÆÿ≤ŸÜÿ©
                    if (this.state.matches.length === 0) {
                        this.loadEmergencyData();
                    }
                }
                
                this.state.isLoading = false;
            }

            async fetchFromProxy() {
                try {
                    const today = new Date().toISOString().split('T')[0];
                    const url = `${this.config.PROXY_URL}?date=${today}`;
                    
                    console.log('üîó ÿ¨ŸÑÿ® ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ:', url);
                    
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), this.config.API_TIMEOUT);
                    
                    const response = await fetch(url, {
                        method: 'GET',
                        signal: controller.signal,
                        headers: {
                            'Accept': 'application/json',
                            'Content-Type': 'application/json'
                        }
                    });
                    
                    clearTimeout(timeoutId);
                    
                    console.log('üì° ÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© Proxy:', response.status);
                    
                    if (!response.ok) {
                        throw new Error(`Proxy Error: ${response.status}`);
                    }
                    
                    const data = await response.json();
                    
                    // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ™ŸÜÿ≥ŸäŸÇ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
                    let matchesArray = [];
                    
                    if (Array.isArray(data)) {
                        matchesArray = data;
                    } else if (data.response && Array.isArray(data.response)) {
                        matchesArray = data.response;
                    } else if (data.data && Array.isArray(data.data)) {
                        matchesArray = data.data;
                    }
                    
                    console.log(`üìä ÿ™ŸÖ ÿßÿ≥ÿ™ŸÑÿßŸÖ ${matchesArray.length} ŸÖÿ®ÿßÿ±ÿßÿ© ŸÖŸÜ Proxy`);
                    
                    if (matchesArray.length === 0) {
                        throw new Error('ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ŸÖŸÜ Proxy');
                    }
                    
                    const transformedMatches = this.transformProxyData(matchesArray);
                    
                    if (transformedMatches.length === 0) {
                        throw new Error('ŸÅÿ¥ŸÑ ÿ™ÿ≠ŸàŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ Proxy');
                    }
                    
                    this.state.matches = transformedMatches;
                    this.state.dataSource = 'proxy';
                    this.state.lastUpdate = new Date();
                    this.saveToCache();
                    this.processMatches();
                    this.showNotification('ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´', `ÿ™ŸÖ ÿ¨ŸÑÿ® ${transformedMatches.length} ŸÖÿ®ÿßÿ±ÿßÿ©`, 'success');
                    
                } catch (error) {
                    if (error.name === 'AbortError') {
                        console.warn('‚è∞ ÿßŸÜÿ™Ÿáÿ™ ŸÖŸáŸÑÿ© ÿßŸÑŸÄ Proxy');
                        throw new Error('ŸÖŸáŸÑÿ© ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑŸÄ Proxy');
                    }
                    console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑŸÄ Proxy:', error.message);
                    throw error;
                }
            }

            transformProxyData(proxyMatches) {
                const transformed = [];
                
                for (const match of proxyMatches) {
                    try {
                        // ŸÖÿ≠ÿßŸàŸÑÿ© ŸÅŸáŸÖ ÿ™ŸÜÿ≥ŸäŸÇÿßÿ™ ŸÖÿÆÿ™ŸÑŸÅÿ© ŸÑŸÑÿ®ŸäÿßŸÜÿßÿ™
                        let fixture, teams, league, goals, score, status, date;
                        
                        if (match.fixture && match.teams) {
                            // ÿ™ŸÜÿ≥ŸäŸÇ API-Football
                            fixture = match.fixture;
                            teams = match.teams;
                            league = match.league;
                            goals = match.goals;
                            score = match.score;
                            status = fixture.status;
                            date = fixture.date;
                        } else if (match.home_team && match.away_team) {
                            // ÿ™ŸÜÿ≥ŸäŸÇ ÿ®ÿØŸäŸÑ
                            fixture = {
                                id: match.id,
                                date: match.date || new Date().toISOString(),
                                status: {
                                    short: match.status || 'NS',
                                    elapsed: match.minute || null
                                },
                                venue: {
                                    name: match.venue || 'ŸÖŸÑÿπÿ® ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ'
                                }
                            };
                            teams = {
                                home: { name: match.home_team },
                                away: { name: match.away_team }
                            };
                            league = {
                                name: match.league || 'ÿØŸàÿ±Ÿä ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ',
                                country: match.country || 'ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ',
                                id: match.league_id || 0
                            };
                            goals = {
                                home: match.home_score,
                                away: match.away_score
                            };
                            score = {
                                fulltime: {
                                    home: match.home_score,
                                    away: match.away_score
                                }
                            };
                        } else {
                            continue; // ÿ™ÿÆÿ∑Ÿä ÿ•ÿ∞ÿß ŸÑŸÖ ŸäŸÉŸÜ ÿßŸÑÿ™ŸÜÿ≥ŸäŸÇ ŸÖÿπÿ±ŸàŸÅŸãÿß
                        }
                        
                        // ÿ™ÿ≠ÿØŸäÿØ ÿ≠ÿßŸÑÿ© ÿßŸÑŸÖÿ®ÿßÿ±ÿßÿ©
                        let statusType = 'upcoming';
                        const statusShort = status.short || 'NS';
                        
                        if (statusShort === 'FT' || statusShort === 'AET' || statusShort === 'PEN') {
                            statusType = 'finished';
                        } else if (statusShort === '1H' || statusShort === '2H' || statusShort === 'HT' || 
                                  statusShort === 'ET' || statusShort === 'BT' || statusShort === 'P' || 
                                  statusShort === 'SUSP' || statusShort === 'INT' || statusShort === 'LIVE') {
                            statusType = 'live';
                        }
                        
                        // ÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ£ŸáŸÖŸäÿ©
                        let importance = 50;
                        const leagueId = league.id;
                        const leagueCountry = league.country;
                        
                        if (leagueId === 2) importance = 100; // ÿØŸàÿ±Ÿä ÿßŸÑÿ£ÿ®ÿ∑ÿßŸÑ
                        else if (leagueId === 39) importance = 95; // ÿßŸÑÿØŸàÿ±Ÿä ÿßŸÑÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿä
                        else if (leagueId === 140) importance = 90; // ÿßŸÑÿØŸàÿ±Ÿä ÿßŸÑÿ•ÿ≥ÿ®ÿßŸÜŸä
                        else if (leagueId === 135) importance = 88; // ÿßŸÑÿØŸàÿ±Ÿä ÿßŸÑÿ•Ÿäÿ∑ÿßŸÑŸä
                        else if (leagueId === 78) importance = 85; // ÿßŸÑÿØŸàÿ±Ÿä ÿßŸÑÿ£ŸÑŸÖÿßŸÜŸä
                        else if (leagueCountry === 'Saudi Arabia' || leagueCountry === 'ÿßŸÑÿ≥ÿπŸàÿØŸäÿ©') importance = 80;
                        
                        // ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ©
                        let scoreText = null;
                        if (goals && goals.home !== null && goals.away !== null) {
                            scoreText = `${goals.home}-${goals.away}`;
                        } else if (score && score.fulltime && score.fulltime.home !== null) {
                            scoreText = `${score.fulltime.home}-${score.fulltime.away}`;
                        }
                        
                        transformed.push({
                            id: fixture.id?.toString() || Date.now().toString() + Math.random(),
                            team1: teams.home.name,
                            team2: teams.away.name,
                            league: league.name,
                            country: league.country,
                            date: new Date(date),
                            status: statusType,
                            score: scoreText,
                            minute: status.elapsed || null,
                            venue: fixture.venue?.name || 'ŸÖŸÑÿπÿ® ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ',
                            importance: importance,
                            isLive: statusType === 'live',
                            isFinished: statusType === 'finished',
                            isUpcoming: statusType === 'upcoming',
                            logo: this.getLeagueLogo(league.name)
                        });
                        
                    } catch (error) {
                        console.warn('‚ö†Ô∏è ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸàŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ®ÿßÿ±ÿßÿ©:', error);
                    }
                }
                
                return transformed;
            }

            loadEmergencyData() {
                console.log('üÜò ÿ™ÿ≠ŸÖŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ∑Ÿàÿßÿ±ÿ¶...');
                
                const now = new Date();
                const emergencyMatches = [
                    {
                        id: '1',
                        team1: 'ÿßŸÑŸáŸÑÿßŸÑ',
                        team2: 'ÿßŸÑŸÜÿµÿ±',
                        league: 'ÿßŸÑÿØŸàÿ±Ÿä ÿßŸÑÿ≥ÿπŸàÿØŸä',
                        country: 'ÿßŸÑÿ≥ÿπŸàÿØŸäÿ©',
                        date: new Date(now.getTime() + 3600000),
                        status: 'upcoming',
                        score: null,
                        minute: null,
                        venue: 'ŸÖŸÑÿπÿ® ÿßŸÑŸÖŸÑŸÉ ŸÅŸáÿØ',
                        importance: 95,
                        isLive: false,
                        isFinished: false,
                        isUpcoming: true,
                        logo: 'üá∏üá¶'
                    },
                    {
                        id: '2',
                        team1: 'ÿ±ŸäÿßŸÑ ŸÖÿØÿ±ŸäÿØ',
                        team2: 'ÿ®ÿ±ÿ¥ŸÑŸàŸÜÿ©',
                        league: 'ÿßŸÑÿØŸàÿ±Ÿä ÿßŸÑÿ•ÿ≥ÿ®ÿßŸÜŸä',
                        country: 'ÿ•ÿ≥ÿ®ÿßŸÜŸäÿß',
                        date: new Date(now.getTime() + 7200000),
                        status: 'upcoming',
                        score: null,
                        minute: null,
                        venue: 'ŸÉÿßŸÖÿ® ŸÜŸà',
                        importance: 98,
                        isLive: false,
                        isFinished: false,
                        isUpcoming: true,
                        logo: 'üá™üá∏'
                    },
                    {
                        id: '3',
                        team1: 'ŸÖÿßŸÜÿ¥ÿ≥ÿ™ÿ± ÿ≥Ÿäÿ™Ÿä',
                        team2: 'ŸÑŸäŸÅÿ±ÿ®ŸàŸÑ',
                        league: 'ÿßŸÑÿØŸàÿ±Ÿä ÿßŸÑÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿä',
                        country: 'ÿ•ŸÜÿ¨ŸÑÿ™ÿ±ÿß',
                        date: now,
                        status: 'live',
                        score: '2-1',
                        minute: 65,
                        venue: 'ÿßŸÑŸäÿ™ihad Stadium',
                        importance: 96,
                        isLive: true,
                        isFinished: false,
                        isUpcoming: false,
                        logo: 'üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø'
                    },
                    {
                        id: '4',
                        team1: 'ÿ®ÿßŸäÿ±ŸÜ ŸÖŸäŸàŸÜÿÆ',
                        team2: 'ÿ®Ÿàÿ±Ÿàÿ≥Ÿäÿß ÿØŸàÿ±ÿ™ŸÖŸàŸÜÿØ',
                        league: 'ÿßŸÑÿØŸàÿ±Ÿä ÿßŸÑÿ£ŸÑŸÖÿßŸÜŸä',
                        country: 'ÿ£ŸÑŸÖÿßŸÜŸäÿß',
                        date: new Date(now.getTime() - 3600000),
                        status: 'finished',
                        score: '3-2',
                        minute: null,
                        venue: 'ÿ£ŸÑŸäÿßŸÜÿ≤ ÿ£ÿ±ŸäŸÜÿß',
                        importance: 90,
                        isLive: false,
                        isFinished: true,
                        isUpcoming: false,
                        logo: 'üá©üá™'
                    },
                    {
                        id: '5',
                        team1: 'ŸäŸàŸÅŸÜÿ™Ÿàÿ≥',
                        team2: 'ÿ•ŸÜÿ™ÿ± ŸÖŸäŸÑÿßŸÜ',
                        league: 'ÿßŸÑÿØŸàÿ±Ÿä ÿßŸÑÿ•Ÿäÿ∑ÿßŸÑŸä',
                        country: 'ÿ•Ÿäÿ∑ÿßŸÑŸäÿß',
                        date: new Date(now.getTime() + 10800000),
                        status: 'upcoming',
                        score: null,
                        minute: null,
                        venue: 'ÿßŸÑŸäŸàŸÅŸÜÿ™Ÿàÿ≥ ÿ≥ÿ™ÿßÿØŸäŸàŸÖ',
                        importance: 88,
                        isLive: false,
                        isFinished: false,
                        isUpcoming: true,
                        logo: 'üáÆüáπ'
                    },
                    {
                        id: '6',
                        team1: 'ÿ®ÿßÿ±Ÿäÿ≥ ÿ≥ÿßŸÜ ÿ¨Ÿäÿ±ŸÖÿßŸÜ',
                        team2: 'ŸÖÿßÿ±ÿ≥ŸäŸÑŸäÿß',
                        league: 'ÿßŸÑÿØŸàÿ±Ÿä ÿßŸÑŸÅÿ±ŸÜÿ≥Ÿä',
                        country: 'ŸÅÿ±ŸÜÿ≥ÿß',
                        date: new Date(now.getTime() + 14400000),
                        status: 'upcoming',
                        score: null,
                        minute: null,
                        venue: 'ÿ®ÿßÿ±ŸÉ ÿØŸä ÿ®ÿ±ŸäŸÜÿ≥',
                        importance: 85,
                        isLive: false,
                        isFinished: false,
                        isUpcoming: true,
                        logo: 'üá´üá∑'
                    }
                ];
                
                this.state.matches = emergencyMatches;
                this.state.dataSource = 'emergency';
                this.state.lastUpdate = new Date();
                this.processMatches();
                this.showNotification('ÿ®ŸäÿßŸÜÿßÿ™ ÿ™ÿ¨ÿ±Ÿäÿ®Ÿäÿ©', 'ÿ¨ÿßÿ±Ÿä ÿπÿ±ÿ∂ ÿ®ŸäÿßŸÜÿßÿ™ ŸÑŸÑÿ™ÿ¨ÿ±ÿ®ÿ©', 'warning');
            }

            processMatches() {
                // ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑÿØŸàÿ±Ÿäÿßÿ™
                this.state.leagues = new Set(this.state.matches.map(m => m.league));
                
                // ÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑŸÅŸÑÿßÿ™ÿ±
                this.applyFilters();
                
                // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸàÿßÿ¨Ÿáÿ©
                this.updateUI();
                
                // ÿ•ÿÆŸÅÿßÿ° ÿßŸÑŸáŸäŸÉŸÑ ÿßŸÑÿπÿ∏ŸÖŸä Ÿàÿ•ÿ∏Ÿáÿßÿ± ÿßŸÑŸÖÿ®ÿßÿ±Ÿäÿßÿ™
                setTimeout(() => {
                    document.getElementById('skeletonLoading').style.display = 'none';
                    document.getElementById('matchesContainer').style.display = 'grid';
                }, 500);
            }

            applyFilters() {
                let filtered = [...this.state.matches];
                
                // ŸÅŸÑÿ™ÿ±ÿ© ÿßŸÑŸàŸÇÿ™
                if (this.state.timeFilter !== 'all') {
                    const now = new Date();
                    const todayStart = new Date(now.getFullYear(), now.getMonth(), now.getDate());
                    
                    switch (this.state.timeFilter) {
                        case 'today':
                            const todayEnd = new Date(todayStart.getTime() + 24 * 60 * 60 * 1000);
                            filtered = filtered.filter(m => 
                                new Date(m.date) >= todayStart && 
                                new Date(m.date) < todayEnd
                            );
                            break;
                        case 'tomorrow':
                            const tomorrowStart = new Date(todayStart.getTime() + 24 * 60 * 60 * 1000);
                            const tomorrowEnd = new Date(tomorrowStart.getTime() + 24 * 60 * 60 * 1000);
                            filtered = filtered.filter(m => 
                                new Date(m.date) >= tomorrowStart && 
                                new Date(m.date) < tomorrowEnd
                            );
                            break;
                        case 'week':
                            const weekEnd = new Date(todayStart.getTime() + 7 * 24 * 60 * 60 * 1000);
                            filtered = filtered.filter(m => 
                                new Date(m.date) >= todayStart && 
                                new Date(m.date) < weekEnd
                            );
                            break;
                    }
                }
                
                // ŸÅŸÑÿ™ÿ±ÿ© ÿßŸÑÿØŸàÿ±Ÿä
                if (this.state.leagueFilter !== 'all') {
                    filtered = filtered.filter(m => m.league === this.state.leagueFilter);
                }
                
                // ÿßŸÑÿ™ÿ±ÿ™Ÿäÿ®
                filtered.sort((a, b) => {
                    if (a.isLive && !b.isLive) return -1;
                    if (!a.isLive && b.isLive) return 1;
                    
                    if (a.isUpcoming && !b.isUpcoming) return -1;
                    if (!a.isUpcoming && b.isUpcoming) return 1;
                    
                    if (a.importance !== b.importance) return b.importance - a.importance;
                    
                    return new Date(a.date) - new Date(b.date);
                });
                
                this.state.filteredMatches = filtered;
            }

            updateUI() {
                this.updateStats();
                this.renderMatches();
                this.updateTimeFilter();
                this.updateLeagueFilter();
            }

            updateStats() {
                const liveCount = this.state.matches.filter(m => m.isLive).length;
                const totalFiltered = this.state.filteredMatches.length;
                
                document.getElementById('totalMatches').textContent = totalFiltered || 0;
                document.getElementById('liveMatches').textContent = liveCount || 0;
                document.getElementById('leaguesCount').textContent = this.state.leagues.size || 0;
                document.getElementById('liveMatchesCount').textContent = liveCount || 0;
                
                if (this.state.lastUpdate) {
                    const diff = Math.floor((Date.now() - this.state.lastUpdate) / 60000);
                    document.getElementById('updateTime').textContent = 
                        diff < 1 ? 'ÿßŸÑÿ¢ŸÜ' : 
                        diff < 60 ? `ŸÇÿ®ŸÑ ${diff} ÿØŸÇŸäŸÇÿ©` :
                        `ŸÇÿ®ŸÑ ${Math.floor(diff/60)} ÿ≥ÿßÿπÿ©`;
                }
            }

            renderMatches() {
                const container = document.getElementById('matchesContainer');
                const emptyState = document.getElementById('emptyState');
                const errorState = document.getElementById('errorState');
                
                if (this.state.filteredMatches.length === 0) {
                    container.innerHTML = '';
                    emptyState.style.display = 'block';
                    errorState.style.display = 'none';
                    
                    const emptyText = document.querySelector('#emptyState h3');
                    if (emptyText) {
                        emptyText.textContent = `ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ŸÅŸä "${this.getFilterLabel(this.state.timeFilter)}"`;
                    }
                    return;
                }
                
                emptyState.style.display = 'none';
                errorState.style.display = 'none';
                
                container.innerHTML = this.state.filteredMatches.map((match, index) => `
                    <div class="match-card ${match.status} ${match.importance > 85 ? 'important' : ''}" 
                         style="animation-delay: ${index * 0.1}s">
                        <div class="match-header">
                            <div class="league-info">
                                <div class="league-logo">${match.logo || '‚öΩ'}</div>
                                <div>
                                    <div style="font-weight: 700; font-size: 0.9rem;">${match.league}</div>
                                    <div style="font-size: 0.8rem; color: var(--gray);">
                                        <i class="fas fa-globe"></i> ${match.country}
                                    </div>
                                </div>
                            </div>
                            <div class="match-status ${match.isLive ? 'status-live' : match.isUpcoming ? 'status-upcoming' : 'status-finished'}">
                                ${match.isLive ? 'ŸÖÿ®ÿßÿ¥ÿ± üî¥' : match.isUpcoming ? 'ŸÇÿßÿØŸÖÿ©' : 'ŸÖŸÜÿ™ŸáŸäÿ©'}
                            </div>
                        </div>
                        
                        <div class="teams-section">
                            <div class="team">
                                <div class="team-logo">${match.team1.charAt(0)}</div>
                                <div class="team-name">${match.team1}</div>
                            </div>
                            
                            <div class="vs-section">
                                <div class="score">${match.score || 'VS'}</div>
                                <div class="vs">${this.formatMatchTime(match)}</div>
                            </div>
                            
                            <div class="team">
                                <div class="team-logo">${match.team2.charAt(0)}</div>
                                <div class="team-name">${match.team2}</div>
                            </div>
                        </div>
                        
                        <div class="match-details">
                            <div class="detail-item">
                                <i class="fas fa-calendar-alt"></i>
                                <span>${this.formatDate(match.date)}</span>
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-clock"></i>
                                <span>${this.formatTime(match.date)}</span>
                            </div>
                            <div class="detail-item" style="grid-column: span 2;">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>${match.venue}</span>
                            </div>
                            ${match.importance > 90 ? `
                                <div class="detail-item" style="grid-column: span 2; justify-content: center; background: rgba(255, 193, 7, 0.1); border-radius: 8px; padding: 8px;">
                                    <i class="fas fa-crown" style="color: var(--warning);"></i>
                                    <span style="color: var(--warning); font-weight: 700;">ŸÖÿ®ÿßÿ±ÿßÿ© ÿ±ÿ¶Ÿäÿ≥Ÿäÿ©</span>
                                </div>
                            ` : ''}
                            ${this.state.dataSource === 'proxy' ? `
                                <div class="detail-item" style="grid-column: span 2; justify-content: center; background: rgba(0, 200, 83, 0.1); border-radius: 8px; padding: 8px;">
                                    <i class="fas fa-server" style="color: var(--primary);"></i>
                                    <span style="color: var(--primary); font-weight: 700;">ÿ®ŸäÿßŸÜÿßÿ™ ÿ≠ŸÇŸäŸÇŸäÿ©</span>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `).join('');
            }

            updateTimeFilter() {
                const filters = [
                    { id: 'today', label: 'ÿßŸÑŸäŸàŸÖ' },
                    { id: 'tomorrow', label: 'ÿ∫ÿØŸãÿß' },
                    { id: 'week', label: 'Ÿáÿ∞ÿß ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ' },
                    { id: 'all', label: 'ÿßŸÑŸÉŸÑ' }
                ];
                
                const container = document.getElementById('timeFilter');
                container.innerHTML = filters.map(filter => `
                    <button class="time-btn ${this.state.timeFilter === filter.id ? 'active' : ''}" 
                            onclick="window.FootballApp.setTimeFilter('${filter.id}')">
                        ${filter.label}
                    </button>
                `).join('');
            }

            updateLeagueFilter() {
                const leagues = ['all', ...Array.from(this.state.leagues)].slice(0, 10);
                
                const container = document.getElementById('leagueFilter');
                container.innerHTML = leagues.map(league => `
                    <button class="league-btn ${this.state.leagueFilter === league ? 'active' : ''}" 
                            onclick="window.FootballApp.setLeagueFilter('${league}')">
                        ${league === 'all' ? 'ÿ¨ŸÖŸäÿπ ÿßŸÑÿØŸàÿ±Ÿäÿßÿ™' : league}
                    </button>
                `).join('');
            }

            // ÿØŸàÿßŸÑ ŸÖÿ≥ÿßÿπÿØÿ©
            getLeagueLogo(leagueName) {
                const logos = {
                    'Premier League': 'üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø',
                    'La Liga': 'üá™üá∏',
                    'Serie A': 'üáÆüáπ',
                    'Bundesliga': 'üá©üá™',
                    'Ligue 1': 'üá´üá∑',
                    'Saudi Professional League': 'üá∏üá¶',
                    'ÿßŸÑÿØŸàÿ±Ÿä ÿßŸÑÿ≥ÿπŸàÿØŸä': 'üá∏üá¶',
                    'ÿßŸÑÿØŸàÿ±Ÿä ÿßŸÑÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿä': 'üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø',
                    'ÿßŸÑÿØŸàÿ±Ÿä ÿßŸÑÿ•ÿ≥ÿ®ÿßŸÜŸä': 'üá™üá∏',
                    'ÿßŸÑÿØŸàÿ±Ÿä ÿßŸÑÿ•Ÿäÿ∑ÿßŸÑŸä': 'üáÆüáπ',
                    'ÿßŸÑÿØŸàÿ±Ÿä ÿßŸÑÿ£ŸÑŸÖÿßŸÜŸä': 'üá©üá™',
                    'ÿßŸÑÿØŸàÿ±Ÿä ÿßŸÑŸÅÿ±ŸÜÿ≥Ÿä': 'üá´üá∑'
                };
                return logos[leagueName] || '‚öΩ';
            }

            formatMatchTime(match) {
                const matchTime = new Date(match.date);
                const now = new Date();
                
                if (match.isLive) {
                    return `ÿßŸÑÿØŸÇŸäŸÇÿ© ${match.minute || '0'}`;
                }
                
                if (match.isUpcoming) {
                    const diff = matchTime - now;
                    const hours = Math.floor(diff / (1000 * 60 * 60));
                    
                    if (hours < 24 && hours > 0) {
                        return `ÿ®ÿπÿØ ${hours} ÿ≥ÿßÿπÿ©`;
                    } else if (hours <= 0) {
                        const minutes = Math.floor(diff / (1000 * 60));
                        return minutes > 0 ? `ÿ®ÿπÿØ ${minutes} ÿØŸÇŸäŸÇÿ©` : 'ŸÇÿ±Ÿäÿ®Ÿãÿß';
                    }
                    
                    return matchTime.toLocaleTimeString('ar-SA', {
                        hour: '2-digit',
                        minute: '2-digit'
                    });
                }
                
                return 'ÿßŸÜÿ™Ÿáÿ™';
            }

            formatDate(date) {
                return new Date(date).toLocaleDateString('ar-SA', {
                    weekday: 'long',
                    day: 'numeric',
                    month: 'long'
                });
            }

            formatTime(date) {
                return new Date(date).toLocaleTimeString('ar-SA', {
                    hour: '2-digit',
                    minute: '2-digit'
                });
            }

            getFilterLabel(filter) {
                const labels = {
                    'today': 'ÿßŸÑŸäŸàŸÖ',
                    'tomorrow': 'ÿ∫ÿØŸãÿß',
                    'week': 'Ÿáÿ∞ÿß ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ',
                    'all': 'ÿßŸÑŸÉŸÑ'
                };
                return labels[filter] || filter;
            }

            formatRelativeTime(date) {
                if (!date) return 'ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ';
                const diff = Math.floor((Date.now() - new Date(date)) / 60000);
                if (diff < 1) return 'ÿßŸÑÿ¢ŸÜ';
                if (diff < 60) return `ŸÇÿ®ŸÑ ${diff} ÿØŸÇŸäŸÇÿ©`;
                if (diff < 1440) return `ŸÇÿ®ŸÑ ${Math.floor(diff/60)} ÿ≥ÿßÿπÿ©`;
                return `ŸÇÿ®ŸÑ ${Math.floor(diff/1440)} ŸäŸàŸÖ`;
            }

            // ÿßŸÑÿ™ÿÆÿ≤ŸäŸÜ
            saveToCache() {
                try {
                    const data = {
                        matches: this.state.matches,
                        lastUpdate: this.state.lastUpdate,
                        version: this.config.VERSION
                    };
                    
                    localStorage.setItem('footscore_pro_data', JSON.stringify(data));
                    console.log('üíæ ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÅŸä ÿßŸÑÿ™ÿÆÿ≤ŸäŸÜ ÿßŸÑŸÖÿ≠ŸÑŸä');
                } catch (e) {
                    console.warn('‚ö†Ô∏è ÿ™ÿπÿ∞ÿ± ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™');
                }
            }

            loadCachedData() {
                try {
                    const data = localStorage.getItem('footscore_pro_data');
                    if (!data) {
                        console.log('üì≠ ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™ ŸÖÿÆÿ≤ŸÜÿ©');
                        return null;
                    }
                    
                    const parsed = JSON.parse(data);
                    
                    if (parsed.version !== this.config.VERSION) {
                        console.log('üîÑ ŸÜÿ≥ÿÆÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÇÿØŸäŸÖÿ©');
                        return null;
                    }
                    
                    if (!parsed.lastUpdate) return null;
                    
                    const expiryTime = new Date(parsed.lastUpdate).getTime() + this.config.CACHE_DURATION;
                    if (Date.now() > expiryTime) {
                        console.log('‚è∞ ÿßŸÜÿ™Ÿáÿ™ ÿµŸÑÿßÿ≠Ÿäÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿÆÿ≤ŸÜÿ©');
                        return null;
                    }
                    
                    const matches = parsed.matches.map(match => ({
                        ...match,
                        date: new Date(match.date)
                    }));
                    
                    this.state.lastUpdate = new Date(parsed.lastUpdate);
                    console.log(`üìÇ ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ${matches.length} ŸÖÿ®ÿßÿ±ÿßÿ© ŸÖŸÜ ÿßŸÑÿ™ÿÆÿ≤ŸäŸÜ ÿßŸÑŸÖÿ≠ŸÑŸä`);
                    
                    return matches;
                    
                } catch (e) {
                    console.warn('‚ö†Ô∏è ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿÆÿ≤ŸÜÿ©:', e);
                    return null;
                }
            }

            // ŸÖÿπÿßŸÑÿ¨ÿßÿ™ ÿßŸÑÿ£ÿ≠ÿØÿßÿ´
            setupEventListeners() {
                window.addEventListener('online', () => {
                    this.state.isOnline = true;
                    this.showConnectionStatus('ÿ™ŸÖ ÿßÿ≥ÿ™ÿπÿßÿØÿ© ÿßŸÑÿßÿ™ÿµÿßŸÑ', 'success');
                    this.showNotification('ÿ™ŸÖ ÿßÿ≥ÿ™ÿπÿßÿØÿ© ÿßŸÑÿßÿ™ÿµÿßŸÑ', 'ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™...', 'success');
                    setTimeout(() => this.refreshMatches(), 2000);
                });
                
                window.addEventListener('offline', () => {
                    this.state.isOnline = false;
                    this.showConnectionStatus('ŸÑÿß ŸäŸàÿ¨ÿØ ÿßÿ™ÿµÿßŸÑ', 'error');
                    this.showNotification('ŸÑÿß ŸäŸàÿ¨ÿØ ÿßÿ™ÿµÿßŸÑ', 'ÿ¨ÿßÿ±Ÿä ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿÆÿ≤ŸÜÿ©', 'warning');
                });
                
                // ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä ŸÉŸÑ ÿØŸÇŸäŸÇÿ©
                setInterval(() => {
                    if (this.state.isOnline && !this.state.isLoading) {
                        console.log('üîÑ ÿ™ÿ≠ÿØŸäÿ´ ÿ™ŸÑŸÇÿßÿ¶Ÿä...');
                        this.refreshMatches();
                    }
                }, this.config.UPDATE_INTERVAL);
            }

            showConnectionStatus(message, type = 'info') {
                const status = document.getElementById('connectionStatus');
                status.innerHTML = `
                    <i class="fas fa-${type === 'success' ? 'wifi' : 'wifi-slash'}"></i>
                    <span>${message}</span>
                `;
                
                status.className = `connection-status ${type} show`;
                
                setTimeout(() => {
                    status.classList.remove('show');
                }, 3000);
            }

            // Ÿàÿßÿ¨Ÿáÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ
            setTimeFilter(filter) {
                this.state.timeFilter = filter;
                this.applyFilters();
                this.updateUI();
            }

            setLeagueFilter(filter) {
                this.state.leagueFilter = filter;
                this.applyFilters();
                this.updateUI();
            }

            async refreshMatches() {
                this.showNotification('ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ÿØŸäÿ´', 'ÿ¨ÿßÿ±Ÿä ÿ¨ŸÑÿ® ÿ£ÿ≠ÿØÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™...', 'info');
                
                // ÿ•ÿπÿßÿØÿ© ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸáŸäŸÉŸÑ ÿßŸÑÿπÿ∏ŸÖŸä
                document.getElementById('skeletonLoading').style.display = 'grid';
                document.getElementById('matchesContainer').style.display = 'none';
                document.getElementById('emptyState').style.display = 'none';
                
                try {
                    await this.fetchFromProxy();
                } catch (error) {
                    console.warn('‚ö†Ô∏è ŸÅÿ¥ŸÑ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™:', error);
                    this.showNotification('ŸÅÿ¥ŸÑ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´', 'ÿ¨ÿßÿ±Ÿä ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ÿßŸÑŸäÿ©', 'warning');
                    // ÿ•ÿπÿßÿØÿ© ÿπÿ±ÿ∂ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ÿßŸÑŸäÿ©
                    document.getElementById('skeletonLoading').style.display = 'none';
                    document.getElementById('matchesContainer').style.display = 'grid';
                }
            }

            showLiveMatches() {
                const liveMatches = this.state.matches.filter(m => m.isLive);
                if (liveMatches.length > 0) {
                    this.state.filteredMatches = liveMatches;
                    this.updateUI();
                    this.showNotification('ÿßŸÑŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±ÿ©', `ÿπÿ±ÿ∂ ${liveMatches.length} ŸÖÿ®ÿßÿ±ÿßÿ© ŸÖÿ®ÿßÿ¥ÿ±ÿ©`, 'info');
                } else {
                    this.showNotification('ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿ®ÿßÿ±Ÿäÿßÿ™', 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ŸÖÿ®ÿßÿ¥ÿ±ÿ© ÿ≠ÿßŸÑŸäÿßŸã', 'warning');
                }
            }

            scrollToTop() {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            showNotification(title, message, type = 'info') {
                // ÿ•ÿ≤ÿßŸÑÿ© ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑŸÇÿØŸäŸÖÿ©
                const oldNotifications = document.querySelectorAll('.notification');
                oldNotifications.forEach(n => n.remove());
                
                const notification = document.createElement('div');
                notification.className = 'notification';
                notification.style.background = type === 'error' ? 'var(--danger)' : 
                                               type === 'warning' ? 'var(--warning)' : 
                                               type === 'success' ? 'var(--primary)' : 
                                               'var(--secondary)';
                
                notification.innerHTML = `
                    <div>
                        <strong>${title}</strong>
                        <div style="font-size: 0.9rem; margin-top: 5px;">${message}</div>
                    </div>
                    <button onclick="this.parentElement.remove()" style="background: none; border: none; color: inherit; cursor: pointer;">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.remove();
                    }
                }, 4000);
            }
        }

        // ÿßŸÑÿ™ŸáŸäÿ¶ÿ©
        document.addEventListener('DOMContentLoaded', () => {
            window.FootballApp = new FootballApp();
        });
    </script>
</body>
</html>
